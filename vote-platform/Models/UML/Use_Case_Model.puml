@startuml
'https://plantuml.com/use-case-diagram

'---
title: Use Case Diagram — Система анонимного голосования
'---
'classDiagram
    actor User
    actor Admin
    actor System

    User --> (Голосовать)
    User --> (Просматривать активные голосования)
    User --> (Видеть результаты)

    Admin --> (Создать голосование)
    Admin --> (Настроить параметры голосования)
    Admin --> (Запустить/остановить голосование)
    Admin --> (Просматривать результаты в реальном времени)
    Admin --> (Просматривать аудит-логи)

    System --> (Проверить право голоса)
    System --> (Заблокировать повторное голосование)
    System --> (Обновить результаты в реальном времени)
    System --> (Залогировать голос)

    (Голосовать) .> (Проверить право голоса) : <<include>>
    (Голосовать) .> (Заблокировать повторное голосование) : <<include>>
    (Голосовать) .> (Залогировать голос) : <<include>>
    (Голосовать) .> (Обновить результаты в реальном времени) : <<include>>

    (Создать голосование) .> (Настроить параметры голосования) : <<include>>

    note right of (Голосовать)
      Анонимное голосование.
      Проверка по email или JWT.
      Поддержка одного или нескольких выборов.
    end note

    note right of (Обновить результаты в реальном времени)
      Задержка ≤ 4 сек.
      Через WebSocket / SSE.
    end note

    note left of (Залогировать голос)
      Сохраняется: IP, User-Agent,
      метод аутентификации, время.
      Только для аудита.
    end note

    note left of Admin
      Может создавать и управлять
      голосованиями, просматривать
      результаты и логи.
    end note

    note right of User
      Пользователь не аутентифицируется
      напрямую. Право голоса проверяется
      по токену (JWT/email).
    end note
@enduml